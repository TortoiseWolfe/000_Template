{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": [
    "NODE_ENV",
    "APP_NAME",
    "PUBLIC_URL",
    "SESSION_SECRET",
    "ALLOWED_ORIGINS"
  ],
  "properties": {
    "NODE_ENV": {
      "type": "string",
      "enum": ["development", "test", "staging", "production"],
      "description": "Application environment"
    },
    "APP_NAME": {
      "type": "string",
      "minLength": 1,
      "description": "Application name"
    },
    "APP_VERSION": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Semantic version"
    },
    "PUBLIC_URL": {
      "type": "string",
      "format": "uri",
      "description": "Public URL of the application"
    },
    "PORT": {
      "type": "string",
      "pattern": "^\\d+$",
      "description": "Server port"
    },
    "ENABLE_ANALYTICS": {
      "type": "string",
      "enum": ["true", "false"],
      "default": "false",
      "description": "Enable analytics tracking"
    },
    "ENABLE_ERROR_TRACKING": {
      "type": "string",
      "enum": ["true", "false"],
      "default": "false",
      "description": "Enable error tracking"
    },
    "ENABLE_COOKIES": {
      "type": "string",
      "enum": ["true", "false"],
      "default": "false",
      "description": "Enable cookies"
    },
    "SESSION_SECRET": {
      "type": "string",
      "minLength": 32,
      "description": "Session encryption secret"
    },
    "JWT_SECRET": {
      "type": "string",
      "minLength": 32,
      "description": "JWT signing secret"
    },
    "JWT_EXPIRY": {
      "type": "string",
      "pattern": "^\\d+[smhd]$",
      "description": "JWT expiry time (e.g., 15m, 1h, 7d)"
    },
    "ALLOWED_ORIGINS": {
      "type": "string",
      "description": "Comma-separated list of allowed origins"
    },
    "RATE_LIMIT_PER_MINUTE": {
      "type": "string",
      "pattern": "^\\d+$",
      "description": "Rate limit per minute"
    },
    "DATABASE_URL": {
      "type": "string",
      "description": "Database connection string"
    },
    "REDIS_URL": {
      "type": "string",
      "description": "Redis connection string"
    },
    "LOG_LEVEL": {
      "type": "string",
      "enum": ["error", "warn", "info", "debug", "trace"],
      "default": "info",
      "description": "Logging level"
    },
    "MAX_FILE_SIZE": {
      "type": "string",
      "pattern": "^\\d+$",
      "description": "Maximum file upload size in bytes"
    },
    "ALLOWED_FILE_TYPES": {
      "type": "string",
      "description": "Comma-separated list of allowed file extensions"
    }
  },
  "additionalProperties": true,
  "if": {
    "properties": {
      "NODE_ENV": {
        "const": "production"
      }
    }
  },
  "then": {
    "required": [
      "NODE_ENV",
      "APP_NAME",
      "PUBLIC_URL",
      "SESSION_SECRET",
      "JWT_SECRET",
      "DATABASE_URL",
      "ALLOWED_ORIGINS"
    ],
    "properties": {
      "DEBUG": {
        "const": "false"
      },
      "MOCK_EXTERNAL_APIS": {
        "const": "false"
      },
      "SEED_DATABASE": {
        "const": "false"
      }
    }
  }
}